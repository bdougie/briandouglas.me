---
import Layout from '../layouts/Layout.astro';
import { generateSimpleCloudinaryOG } from '../utils/cloudinary';

// Test the Cloudinary integration with sample data
const sampleTitle = "Testing Cloudinary Dynamic Social Cards";
const sampleDescription = "This is a test page to verify that our Cloudinary integration is working correctly for dynamic OG image generation.";

const cloudinaryUrl = generateSimpleCloudinaryOG({
  title: sampleTitle,
  description: sampleDescription,
  author: 'Brian Douglas',
  site: 'briandouglas.me'
});
---

<Layout title={sampleTitle} description={sampleDescription} isBlogPost={false}>
  <article class="max-w-none prose prose-lg prose-invert">
    <h1>Cloudinary Integration Test</h1>
    
    <p>This page tests the Cloudinary dynamic social card generation.</p>
    
    <div class="bg-gray-800 p-6 rounded-lg">
      <h2 class="text-white mb-4">Generated Cloudinary URL:</h2>
      <code class="text-green-400 break-all text-sm">{cloudinaryUrl}</code>
    </div>
    
    <div class="mt-8">
      <h2 class="text-white mb-4">Preview:</h2>
      <img src={cloudinaryUrl} alt="Generated social card" class="border border-gray-600 rounded" />
    </div>

    <div class="mt-8 bg-yellow-900 p-4 rounded">
      <h3 class="text-yellow-200 mb-2">Setup Required:</h3>
      <p class="text-yellow-100">To use this feature, add your Cloudinary cloud name to your environment:</p>
      <code class="block mt-2 p-2 bg-gray-800 text-green-400">PUBLIC_CLOUDINARY_CLOUD_NAME=your-cloud-name</code>
    </div>
  </article>
</Layout>